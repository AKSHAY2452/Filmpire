{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/Downloads/filmpire-l2-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HP/Downloads/filmpire-l2-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";export var moviesApi=axios.create({baseURL:\"https://api.themoviedb.org/3\",params:{api_key:process.env.REACT_APP_TMDB_KEY}});export var fetchToken=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$moviesApi$get,data,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return moviesApi.get(\"/authentication/token/new\");case 3:_yield$moviesApi$get=_context.sent;data=_yield$moviesApi$get.data;token=data.request_token;if(data.success){localStorage.setItem(\"request_token\",token);window.location.href=\"https://www.themoviedb.org/authenticate/\".concat(token,\"?redirect_to=\").concat(window.location.origin,\"/approved\");}_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(\"Sorry, your token could not be created\");case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function fetchToken(){return _ref.apply(this,arguments);};}();export var createSessionId=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var token,_yield$moviesApi$post,session_id;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:token=localStorage.getItem(\"request_token\");if(!token){_context2.next=14;break;}_context2.prev=2;_context2.next=5;return moviesApi.post(\"authentication/session/new\",{request_token:token});case 5:_yield$moviesApi$post=_context2.sent;session_id=_yield$moviesApi$post.data.session_id;localStorage.setItem(\"session_id\",session_id);return _context2.abrupt(\"return\",session_id);case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}}},_callee2,null,[[2,11]]);}));return function createSessionId(){return _ref2.apply(this,arguments);};}();","map":{"version":3,"sources":["C:/Users/HP/Downloads/filmpire-l2-forked/src/utils/index.js"],"names":["axios","moviesApi","create","baseURL","params","api_key","process","env","REACT_APP_TMDB_KEY","fetchToken","get","data","token","request_token","success","localStorage","setItem","window","location","href","origin","console","log","createSessionId","getItem","post","session_id"],"mappings":"2TAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAGD,KAAK,CAACE,MAAN,CAAa,CACpCC,OAAO,CAAE,8BAD2B,CAEpCC,MAAM,CAAE,CACNC,OAAO,CAAEC,OAAO,CAACC,GAAR,CAAYC,kBADf,CAF4B,CAAb,CAAlB,CAOP,MAAO,IAAMC,CAAAA,UAAU,0FAAG,6MAECR,CAAAA,SAAS,CAACS,GAAV,CAAc,2BAAd,CAFD,2CAEdC,IAFc,sBAEdA,IAFc,CAIhBC,KAJgB,CAIRD,IAAI,CAACE,aAJG,CAMtB,GAAIF,IAAI,CAACG,OAAT,CAAkB,CAChBC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAsCJ,KAAtC,EAEAK,MAAM,CAACC,QAAP,CAAgBC,IAAhB,mDAAkEP,KAAlE,yBAAuFK,MAAM,CAACC,QAAP,CAAgBE,MAAvG,cACD,CAVqB,+EAYtBC,OAAO,CAACC,GAAR,CAAY,wCAAZ,EAZsB,oEAAH,kBAAVb,CAAAA,UAAU,0CAAhB,CAgBP,MAAO,IAAMc,CAAAA,eAAe,2FAAG,mLACvBX,KADuB,CACfG,YAAY,CAACS,OAAb,CAAqB,eAArB,CADe,KAGzBZ,KAHyB,mEAOfX,CAAAA,SAAS,CAACwB,IAAV,CAAe,4BAAf,CAA6C,CACrDZ,aAAa,CAAED,KADsC,CAA7C,CAPe,6CAMfc,UANe,uBAMvBf,IANuB,CAMfe,UANe,CAUzBX,YAAY,CAACC,OAAb,CAAqB,YAArB,CAAmCU,UAAnC,EAVyB,iCAYlBA,UAZkB,+DAczBL,OAAO,CAACC,GAAR,eAdyB,uEAAH,kBAAfC,CAAAA,eAAe,2CAArB","sourcesContent":["import axios from \"axios\";\r\n\r\nexport const moviesApi = axios.create({\r\n  baseURL: \"https://api.themoviedb.org/3\",\r\n  params: {\r\n    api_key: process.env.REACT_APP_TMDB_KEY,\r\n  },\r\n});\r\n\r\nexport const fetchToken = async () => {\r\n  try {\r\n    const { data } = await moviesApi.get(\"/authentication/token/new\");\r\n\r\n    const token = data.request_token;\r\n\r\n    if (data.success) {\r\n      localStorage.setItem(\"request_token\", token);\r\n\r\n      window.location.href = `https://www.themoviedb.org/authenticate/${token}?redirect_to=${window.location.origin}/approved`;\r\n    }\r\n  } catch (error) {\r\n    console.log(\"Sorry, your token could not be created\");\r\n  }\r\n};\r\n\r\nexport const createSessionId = async () => {\r\n  const token = localStorage.getItem(\"request_token\");\r\n\r\n  if (token) {\r\n    try {\r\n      const {\r\n        data: { session_id },\r\n      } = await moviesApi.post(\"authentication/session/new\", {\r\n        request_token: token,\r\n      });\r\n      localStorage.setItem(\"session_id\", session_id);\r\n\r\n      return session_id;\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}