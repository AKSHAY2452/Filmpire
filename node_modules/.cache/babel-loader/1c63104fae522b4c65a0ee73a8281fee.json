{"ast":null,"code":"import React,{useEffect}from\"react\";import{Typography,Button,Box}from\"@mui/material\";import{useSelector}from\"react-redux\";import{ExitToApp}from\"@mui/icons-material\";import{useGetListQuery}from\"../../services/TMDB\";import{userSelector}from\"../../features/auth\";import{RatedCards}from\"..\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Profile=function Profile(){var _favoriteMovies$resul,_watchlistMovies$resu;var _useSelector=useSelector(userSelector),user=_useSelector.user;var _useGetListQuery=useGetListQuery({listName:\"favorite/movies\",accountId:user.id,sessionId:localStorage.getItem(\"session_id\"),page:1}),favoriteMovies=_useGetListQuery.data,refetchFavorites=_useGetListQuery.refetch;var _useGetListQuery2=useGetListQuery({listName:\"watchlist/movies\",accountId:user.id,sessionId:localStorage.getItem(\"session_id\"),page:1}),watchlistMovies=_useGetListQuery2.data,refetchWatchlisted=_useGetListQuery2.refetch;//refetch is used because when we unwatchlist then to update it on profile page we need to reload to update instantly we use refetch\nuseEffect(function(){refetchFavorites();refetchWatchlisted();},[]);var logout=function logout(){localStorage.clear();window.location.href=\"/\";};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{display:\"flex\",justifyContent:\"space-between\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,children:\"My Profile\"}),/*#__PURE__*/_jsxs(Button,{color:\"inherit\",onClick:logout,children:[\"Logout \\xA0 \",/*#__PURE__*/_jsx(ExitToApp,{})]})]}),!(favoriteMovies===null||favoriteMovies===void 0?void 0:(_favoriteMovies$resul=favoriteMovies.results)===null||_favoriteMovies$resul===void 0?void 0:_favoriteMovies$resul.length)&&!(watchlistMovies===null||watchlistMovies===void 0?void 0:(_watchlistMovies$resu=watchlistMovies.results)===null||_watchlistMovies$resu===void 0?void 0:_watchlistMovies$resu.length)?/*#__PURE__*/_jsx(Typography,{variant:\"h5\",children:\"Add favorites or watchlist some movies to see them here!\"}):/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(RatedCards,{title:\"Favorite Movies\",data:favoriteMovies}),/*#__PURE__*/_jsx(RatedCards,{title:\"Watchlist\",data:watchlistMovies})]})]});};export default Profile;","map":{"version":3,"sources":["C:/Users/HP/Downloads/filmpire-l2-forked/src/components/Profile/Profile.jsx"],"names":["React","useEffect","Typography","Button","Box","useSelector","ExitToApp","useGetListQuery","userSelector","RatedCards","Profile","user","listName","accountId","id","sessionId","localStorage","getItem","page","favoriteMovies","data","refetchFavorites","refetch","watchlistMovies","refetchWatchlisted","logout","clear","window","location","href","results","length"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,UAAT,CAAqBC,MAArB,CAA6BC,GAA7B,KAAwC,eAAxC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,OAASC,SAAT,KAA0B,qBAA1B,CAEA,OAASC,eAAT,KAAgC,qBAAhC,CACA,OAASC,YAAT,KAA6B,qBAA7B,CACA,OAASC,UAAT,KAA2B,IAA3B,C,wFAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAM,iDACpB,iBAAiBL,WAAW,CAACG,YAAD,CAA5B,CAAQG,IAAR,cAAQA,IAAR,CAEA,qBAA4DJ,eAAe,CAAC,CAAEK,QAAQ,CAAE,iBAAZ,CAA+BC,SAAS,CAAEF,IAAI,CAACG,EAA/C,CAAmDC,SAAS,CAAEC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAA9D,CAAkGC,IAAI,CAAE,CAAxG,CAAD,CAA3E,CAAcC,cAAd,kBAAQC,IAAR,CAAuCC,gBAAvC,kBAA8BC,OAA9B,CACA,sBAA+Df,eAAe,CAAC,CAAEK,QAAQ,CAAE,kBAAZ,CAAgCC,SAAS,CAAEF,IAAI,CAACG,EAAhD,CAAoDC,SAAS,CAAEC,YAAY,CAACC,OAAb,CAAqB,YAArB,CAA/D,CAAmGC,IAAI,CAAE,CAAzG,CAAD,CAA9E,CAAcK,eAAd,mBAAQH,IAAR,CAAwCI,kBAAxC,mBAA+BF,OAA/B,CAEA;AACArB,SAAS,CAAC,UAAM,CACdoB,gBAAgB,GAChBG,kBAAkB,GACnB,CAHQ,CAGN,EAHM,CAAT,CAKA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACnBT,YAAY,CAACU,KAAb,GAEAC,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CACD,CAJD,CAMA,mBACE,MAAC,GAAD,yBACE,MAAC,GAAD,EAAK,OAAO,CAAC,MAAb,CAAoB,cAAc,CAAC,eAAnC,wBACE,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,YAAY,KAArC,wBADF,cAIE,MAAC,MAAD,EAAQ,KAAK,CAAC,SAAd,CAAwB,OAAO,CAAEJ,MAAjC,uCACgB,KAAC,SAAD,IADhB,GAJF,GADF,CASG,EAACN,cAAD,SAACA,cAAD,wCAACA,cAAc,CAAEW,OAAjB,gDAAC,sBAAyBC,MAA1B,GAAoC,EAACR,eAAD,SAACA,eAAD,wCAACA,eAAe,CAAEO,OAAlB,gDAAC,sBAA0BC,MAA3B,CAApC,cACC,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,sEADD,cAGC,MAAC,GAAD,yBACE,KAAC,UAAD,EAAY,KAAK,CAAC,iBAAlB,CAAoC,IAAI,CAAEZ,cAA1C,EADF,cAEE,KAAC,UAAD,EAAY,KAAK,CAAC,WAAlB,CAA8B,IAAI,CAAEI,eAApC,EAFF,GAZJ,GADF,CAoBD,CAtCD,CAwCA,cAAeb,CAAAA,OAAf","sourcesContent":["import React, { useEffect } from \"react\";\nimport { Typography, Button, Box } from \"@mui/material\";\nimport { useSelector } from \"react-redux\";\nimport { ExitToApp } from \"@mui/icons-material\";\n\nimport { useGetListQuery } from \"../../services/TMDB\";\nimport { userSelector } from \"../../features/auth\";\nimport { RatedCards } from \"..\";\n\nconst Profile = () => {\n  const { user } = useSelector(userSelector);\n\n  const { data: favoriteMovies, refetch: refetchFavorites } = useGetListQuery({ listName: \"favorite/movies\", accountId: user.id, sessionId: localStorage.getItem(\"session_id\"), page: 1 });\n  const { data: watchlistMovies, refetch: refetchWatchlisted } = useGetListQuery({ listName: \"watchlist/movies\", accountId: user.id, sessionId: localStorage.getItem(\"session_id\"), page: 1 });\n\n  //refetch is used because when we unwatchlist then to update it on profile page we need to reload to update instantly we use refetch\n  useEffect(() => {\n    refetchFavorites();\n    refetchWatchlisted();\n  }, []);\n\n  const logout = () => {\n    localStorage.clear();\n\n    window.location.href = \"/\";\n  };\n\n  return (\n    <Box>\n      <Box display=\"flex\" justifyContent=\"space-between\">\n        <Typography variant=\"h4\" gutterBottom>\n          My Profile\n        </Typography>\n        <Button color=\"inherit\" onClick={logout}>\n          Logout &nbsp; <ExitToApp />\n        </Button>\n      </Box>\n      {!favoriteMovies?.results?.length && !watchlistMovies?.results?.length ? (\n        <Typography variant=\"h5\">Add favorites or watchlist some movies to see them here!</Typography>\n      ) : (\n        <Box>\n          <RatedCards title=\"Favorite Movies\" data={favoriteMovies} />\n          <RatedCards title=\"Watchlist\" data={watchlistMovies} />\n        </Box>\n      )}\n    </Box>\n  );\n};\n\nexport default Profile;\n"]},"metadata":{},"sourceType":"module"}