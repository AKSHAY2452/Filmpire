{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/Downloads/filmpire-l2-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/HP/Downloads/filmpire-l2-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/HP/Downloads/filmpire-l2-forked/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Modal,Typography,Button,ButtonGroup,Grid,useMediaQuery,Box,CircularProgress,Rating}from\"@mui/material\";import{Movie as MovieIcon,Theaters,Language,PlusOne,Favorite,FavoriteBorderOutlined,Remove,ArrowBack}from\"@mui/icons-material\";import{Link,useParams}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import axios from\"axios\";import{selectGenreOrCategory}from\"../../features/currentGenreOrCategory\";import useStyles from\"./styles\";import{useGetMovieQuery,useGetRecommendationsQuery,useGetListQuery}from\"../../services/TMDB\";import genreIcons from\"../../assets/genres\";import{MovieList}from\"..\";import{userSelector}from\"../../features/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MovieInformation=function MovieInformation(){var _data$genres,_data$videos,_data$videos$results;var _useSelector=useSelector(function(state){return state.currentGenreOrCategory;}),genreIdOrCategoryName=_useSelector.genreIdOrCategoryName;var _useSelector2=useSelector(userSelector),user=_useSelector2.user;var _useParams=useParams(),id=_useParams.id;var classes=useStyles();var dispatch=useDispatch();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),open=_useState2[0],setOpen=_useState2[1];var _useGetMovieQuery=useGetMovieQuery(id),data=_useGetMovieQuery.data,isFetching=_useGetMovieQuery.isFetching,error=_useGetMovieQuery.error;var _useGetListQuery=useGetListQuery({listName:\"favorite/movies\",accountId:user.id,sessionId:localStorage.getItem(\"session_id\"),page:1}),favoriteMovies=_useGetListQuery.data;var _useGetListQuery2=useGetListQuery({listName:\"watchlist/movies\",accountId:user.id,sessionId:localStorage.getItem(\"session_id\"),page:1}),watchlistMovies=_useGetListQuery2.data;var _useGetRecommendation=useGetRecommendationsQuery({list:\"/recommendations\",movie_id:id}),recommendations=_useGetRecommendation.data,isRecommendationsFetching=_useGetRecommendation.isFetching;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isMovieFavorited=_useState4[0],setIsMovieFavorited=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isMovieWatchlisted=_useState6[0],setIsMovieWatchlisted=_useState6[1];useEffect(function(){var _favoriteMovies$resul;setIsMovieFavorited(!!(favoriteMovies===null||favoriteMovies===void 0?void 0:(_favoriteMovies$resul=favoriteMovies.results)===null||_favoriteMovies$resul===void 0?void 0:_favoriteMovies$resul.find(function(movie){return(movie===null||movie===void 0?void 0:movie.id)===(data===null||data===void 0?void 0:data.id);})));},[favoriteMovies,data]);useEffect(function(){var _watchlistMovies$resu;setIsMovieWatchlisted(!!(watchlistMovies===null||watchlistMovies===void 0?void 0:(_watchlistMovies$resu=watchlistMovies.results)===null||_watchlistMovies$resu===void 0?void 0:_watchlistMovies$resu.find(function(movie){return(movie===null||movie===void 0?void 0:movie.id)===(data===null||data===void 0?void 0:data.id);})));},[watchlistMovies,data]);var addToFavorites=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post(\"https://api.themoviedb.org/3/account/\".concat(user.id,\"/favorite?api_key=\").concat(process.env.REACT_APP_TMDB_KEY,\"&session_id=\").concat(localStorage.getItem(\"session_id\")),{media_type:\"movie\",media_id:id,favorite:!isMovieFavorited});case 2:setIsMovieFavorited(function(prev){return!prev;});case 3:case\"end\":return _context.stop();}}},_callee);}));return function addToFavorites(){return _ref.apply(this,arguments);};}();console.log({isMovieWatchlisted:isMovieWatchlisted});var addToWatchlist=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.post(\"https://api.themoviedb.org/3/account/\".concat(user.id,\"/watchlist?api_key=\").concat(process.env.REACT_APP_TMDB_KEY,\"&session_id=\").concat(localStorage.getItem(\"session_id\")),{media_type:\"movie\",media_id:id,watchlist:!isMovieWatchlisted});case 2:setIsMovieWatchlisted(function(prev){return!prev;});case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function addToWatchlist(){return _ref2.apply(this,arguments);};}();if(isFetching){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(CircularProgress,{size:\"8rem\"})});}if(error){return/*#__PURE__*/_jsx(Box,{display:\"flex\",justifyContent:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Something is wrong, Go back\"})});}return/*#__PURE__*/_jsxs(Grid,{container:true,className:classes.containerSpaceAround,children:[/*#__PURE__*/_jsx(Grid,{item:true,sm:12,lg:4,children:/*#__PURE__*/_jsx(\"img\",{className:classes.poster,src:\"https://image.tmdb.org/t/p/w500/\".concat(data===null||data===void 0?void 0:data.poster_path),alt:data===null||data===void 0?void 0:data.title})}),/*#__PURE__*/_jsxs(Grid,{item:true,container:true,direction:\"column\",lg:7,children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h4\",align:\"center\",gutterBottom:\"true\",children:[data===null||data===void 0?void 0:data.title,\" (\",data.release_date.split(\"-\")[0],\")\"]}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",align:\"center\",gutterBottom:\"true\",children:data===null||data===void 0?void 0:data.tagline}),/*#__PURE__*/_jsxs(Grid,{item:true,className:classes.containerSpaceAround,children:[/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsx(Rating,{readOnly:true,value:data.vote_average/2}),/*#__PURE__*/_jsxs(Typography,{variant:\"h9\",gutterBottom:\"true\",style:{marginleft:\"10px\"},children:[data===null||data===void 0?void 0:data.vote_average,\" / 10\"]})]}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",align:\"center\",gutterBottom:\"true\",children:[data===null||data===void 0?void 0:data.runtime,\"min | Language: \",data===null||data===void 0?void 0:data.spoken_languages[0].name]})]}),/*#__PURE__*/_jsx(Grid,{item:true,className:classes.genresContainer,children:data===null||data===void 0?void 0:(_data$genres=data.genres)===null||_data$genres===void 0?void 0:_data$genres.map(function(genre){return/*#__PURE__*/_jsxs(Link,{className:classes.links,to:\"/\",onClick:function onClick(){return dispatch(selectGenreOrCategory(genre.id));},children:[/*#__PURE__*/_jsx(\"img\",{src:genreIcons[genre.name.toLowerCase()],alt:\"\",className:classes.genreImage,height:30}),/*#__PURE__*/_jsx(Typography,{color:\"textPrimary\",variant:\"subtitle1\",children:genre===null||genre===void 0?void 0:genre.name})]},genre.name);})}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,style:{marginTop:\"10px\"},children:\"Overview\"}),/*#__PURE__*/_jsx(Typography,{style:{marginBottom:\"2rem\"},children:data===null||data===void 0?void 0:data.overview}),/*#__PURE__*/_jsx(Typography,{variant:\"h5\",gutterBottom:true,children:\"Top Cast\"}),/*#__PURE__*/_jsx(Grid,{item:true,container:true,spacing:2,children:data&&data.credits.cast.map(function(character,i){return character.profile_path&&/*#__PURE__*/_jsxs(Grid,{item:true,xs:4,md:2,component:Link,to:\"/actors/\".concat(character.id),style:{textDecoration:\"none\"},children:[/*#__PURE__*/_jsx(\"img\",{className:classes.castImage,src:\"https://image.tmdb.org/t/p/w500/\".concat(character.profile_path),alt:character.name}),/*#__PURE__*/_jsx(Typography,{color:\"textPrimary\",children:character===null||character===void 0?void 0:character.name}),/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:character.character.split(\"/\")[0]})]},i);}).slice(0,6)}),/*#__PURE__*/_jsx(Grid,{item:true,container:true,style:{marginTop:\"2rem\"},children:/*#__PURE__*/_jsxs(\"div\",{className:classes.buttonsContainer,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,className:classes.buttonsContainer,children:/*#__PURE__*/_jsxs(ButtonGroup,{size:\"small\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(Button,{target:\"_blank\",rel:\"noopener noreferrer\",href:data===null||data===void 0?void 0:data.homepage,endIcon:/*#__PURE__*/_jsx(Language,{}),children:\"Website\"}),/*#__PURE__*/_jsx(Button,{target:\"_blank\",rel:\"noopener noreferrer\",href:\"https://www.imdb.com/title/\".concat(data===null||data===void 0?void 0:data.imdb_id),endIcon:/*#__PURE__*/_jsx(MovieIcon,{}),children:\"IMDB\"}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return setOpen(true);},href:\"#\",endIcon:/*#__PURE__*/_jsx(Theaters,{}),children:\"Trailer\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,className:classes.buttonsContainer,children:/*#__PURE__*/_jsxs(ButtonGroup,{size:\"small\",variant:\"outlined\",children:[/*#__PURE__*/_jsx(Button,{onClick:addToFavorites,endIcon:isMovieFavorited?/*#__PURE__*/_jsx(FavoriteBorderOutlined,{}):/*#__PURE__*/_jsx(Favorite,{}),children:isMovieFavorited?\"Unfavorite\":\"Favorite\"}),/*#__PURE__*/_jsx(Button,{onClick:addToWatchlist,endIcon:isMovieWatchlisted?/*#__PURE__*/_jsx(Remove,{}):/*#__PURE__*/_jsx(PlusOne,{}),children:\"Watchlist\"}),/*#__PURE__*/_jsx(Button,{endIcon:/*#__PURE__*/_jsx(ArrowBack,{}),sx:{borderColor:\"primary.main\"},children:/*#__PURE__*/_jsx(Typography,{style:{textDecoration:\"none\"},component:Link,to:\"/\",color:\"inherit\",variant:\"subtitle2\",children:\"Back\"})})]})})]})})]}),/*#__PURE__*/_jsxs(Box,{marginTop:\"5rem\",width:\"100%\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",gutterBottom:true,align:\"center\",children:\"You Might Also Like\"}),recommendations?/*#__PURE__*/_jsx(MovieList,{movies:recommendations,numberOfMovies:8}):/*#__PURE__*/_jsx(Box,{children:\"SORRY, NOTHING WAS FOUND \"})]}),/*#__PURE__*/_jsx(Modal,{closeAfterTransition:true,className:classes.modal,open:open,onClose:function onClose(){return setOpen(false);},children:(data===null||data===void 0?void 0:(_data$videos=data.videos)===null||_data$videos===void 0?void 0:(_data$videos$results=_data$videos.results)===null||_data$videos$results===void 0?void 0:_data$videos$results.length)>0&&/*#__PURE__*/_jsx(\"iframe\",{autoPlay:true,className:classes.video,frameBorder:\"0\",title:\"Trailer\",src:\"https://www.youtube.com/embed/\".concat(data.videos.results[0].key),allow:\"autoplay\"})})]});};export default MovieInformation;","map":{"version":3,"sources":["C:/Users/HP/Downloads/filmpire-l2-forked/src/components/MovieInformation/MovieInformation.jsx"],"names":["React","useState","useEffect","Modal","Typography","Button","ButtonGroup","Grid","useMediaQuery","Box","CircularProgress","Rating","Movie","MovieIcon","Theaters","Language","PlusOne","Favorite","FavoriteBorderOutlined","Remove","ArrowBack","Link","useParams","useDispatch","useSelector","axios","selectGenreOrCategory","useStyles","useGetMovieQuery","useGetRecommendationsQuery","useGetListQuery","genreIcons","MovieList","userSelector","MovieInformation","state","currentGenreOrCategory","genreIdOrCategoryName","user","id","classes","dispatch","open","setOpen","data","isFetching","error","listName","accountId","sessionId","localStorage","getItem","page","favoriteMovies","watchlistMovies","list","movie_id","recommendations","isRecommendationsFetching","isMovieFavorited","setIsMovieFavorited","isMovieWatchlisted","setIsMovieWatchlisted","results","find","movie","addToFavorites","post","process","env","REACT_APP_TMDB_KEY","media_type","media_id","favorite","prev","console","log","addToWatchlist","watchlist","containerSpaceAround","poster","poster_path","title","release_date","split","tagline","vote_average","marginleft","runtime","spoken_languages","name","genresContainer","genres","map","genre","links","toLowerCase","genreImage","marginTop","marginBottom","overview","credits","cast","character","i","profile_path","textDecoration","castImage","slice","buttonsContainer","homepage","imdb_id","borderColor","modal","videos","length","video","key"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Modal, Typography, Button, ButtonGroup, Grid, useMediaQuery, Box, CircularProgress, Rating } from \"@mui/material\";\nimport { Movie as MovieIcon, Theaters, Language, PlusOne, Favorite, FavoriteBorderOutlined, Remove, ArrowBack } from \"@mui/icons-material\";\nimport { Link, useParams } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport axios from \"axios\";\n\nimport { selectGenreOrCategory } from \"../../features/currentGenreOrCategory\";\nimport useStyles from \"./styles\";\nimport { useGetMovieQuery, useGetRecommendationsQuery, useGetListQuery } from \"../../services/TMDB\";\nimport genreIcons from \"../../assets/genres\";\nimport { MovieList } from \"..\";\nimport { userSelector } from \"../../features/auth\";\n\nconst MovieInformation = () => {\n  const { genreIdOrCategoryName } = useSelector((state) => state.currentGenreOrCategory);\n  const { user } = useSelector(userSelector);\n  const { id } = useParams();\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const [open, setOpen] = useState(false);\n\n  const { data, isFetching, error } = useGetMovieQuery(id);\n  const { data: favoriteMovies } = useGetListQuery({ listName: \"favorite/movies\", accountId: user.id, sessionId: localStorage.getItem(\"session_id\"), page: 1 });\n  const { data: watchlistMovies } = useGetListQuery({ listName: \"watchlist/movies\", accountId: user.id, sessionId: localStorage.getItem(\"session_id\"), page: 1 });\n  const { data: recommendations, isFetching: isRecommendationsFetching } = useGetRecommendationsQuery({ list: \"/recommendations\", movie_id: id });\n\n  const [isMovieFavorited, setIsMovieFavorited] = useState(false);\n  const [isMovieWatchlisted, setIsMovieWatchlisted] = useState(false);\n\n  useEffect(() => {\n    setIsMovieFavorited(!!favoriteMovies?.results?.find((movie) => movie?.id === data?.id));\n  }, [favoriteMovies, data]);\n\n  useEffect(() => {\n    setIsMovieWatchlisted(!!watchlistMovies?.results?.find((movie) => movie?.id === data?.id));\n  }, [watchlistMovies, data]);\n\n  const addToFavorites = async () => {\n    await axios.post(`https://api.themoviedb.org/3/account/${user.id}/favorite?api_key=${process.env.REACT_APP_TMDB_KEY}&session_id=${localStorage.getItem(\"session_id\")}`, {\n      media_type: \"movie\",\n      media_id: id,\n      favorite: !isMovieFavorited,\n    });\n\n    setIsMovieFavorited((prev) => !prev);\n  };\n\n  console.log({ isMovieWatchlisted });\n\n  const addToWatchlist = async () => {\n    await axios.post(`https://api.themoviedb.org/3/account/${user.id}/watchlist?api_key=${process.env.REACT_APP_TMDB_KEY}&session_id=${localStorage.getItem(\"session_id\")}`, {\n      media_type: \"movie\",\n      media_id: id,\n      watchlist: !isMovieWatchlisted,\n    });\n\n    setIsMovieWatchlisted((prev) => !prev);\n  };\n\n  if (isFetching) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n        <CircularProgress size=\"8rem\" />\n      </Box>\n    );\n  }\n  if (error) {\n    return (\n      <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\">\n        <Link to=\"/\">Something is wrong, Go back</Link>\n      </Box>\n    );\n  }\n\n  return (\n    <Grid container className={classes.containerSpaceAround}>\n      <Grid item sm={12} lg={4}>\n        <img className={classes.poster} src={`https://image.tmdb.org/t/p/w500/${data?.poster_path}`} alt={data?.title} />\n      </Grid>\n      <Grid item container direction=\"column\" lg={7}>\n        <Typography variant=\"h4\" align=\"center\" gutterBottom=\"true\">\n          {data?.title} ({data.release_date.split(\"-\")[0]})\n        </Typography>\n        <Typography variant=\"h5\" align=\"center\" gutterBottom=\"true\">\n          {data?.tagline}\n        </Typography>\n        <Grid item className={classes.containerSpaceAround}>\n          <Box>\n            <Rating readOnly value={data.vote_average / 2} />\n            <Typography variant=\"h9\" gutterBottom=\"true\" style={{ marginleft: \"10px\" }}>\n              {data?.vote_average} / 10\n            </Typography>\n          </Box>\n          <Typography variant=\"h6\" align=\"center\" gutterBottom=\"true\">\n            {data?.runtime}min | Language: {data?.spoken_languages[0].name}\n          </Typography>\n        </Grid>\n        <Grid item className={classes.genresContainer}>\n          {data?.genres?.map((genre) => (\n            <Link key={genre.name} className={classes.links} to=\"/\" onClick={() => dispatch(selectGenreOrCategory(genre.id))}>\n              <img src={genreIcons[genre.name.toLowerCase()]} alt=\"\" className={classes.genreImage} height={30} />\n              <Typography color=\"textPrimary\" variant=\"subtitle1\">\n                {genre?.name}\n              </Typography>\n            </Link>\n          ))}\n        </Grid>\n        <Typography variant=\"h5\" gutterBottom style={{ marginTop: \"10px\" }}>\n          Overview\n        </Typography>\n        <Typography style={{ marginBottom: \"2rem\" }}>{data?.overview}</Typography>\n        <Typography variant=\"h5\" gutterBottom>\n          Top Cast\n        </Typography>\n        <Grid item container spacing={2}>\n          {data &&\n            data.credits.cast\n              .map(\n                (character, i) =>\n                  character.profile_path && (\n                    <Grid key={i} item xs={4} md={2} component={Link} to={`/actors/${character.id}`} style={{ textDecoration: \"none\" }}>\n                      <img className={classes.castImage} src={`https://image.tmdb.org/t/p/w500/${character.profile_path}`} alt={character.name} />\n                      <Typography color=\"textPrimary\">{character?.name}</Typography>\n                      <Typography color=\"textSecondary\">{character.character.split(\"/\")[0]}</Typography>\n                    </Grid>\n                  )\n              )\n              .slice(0, 6)}\n        </Grid>\n        <Grid item container style={{ marginTop: \"2rem\" }}>\n          <div className={classes.buttonsContainer}>\n            <Grid item xs={12} sm={6} className={classes.buttonsContainer}>\n              <ButtonGroup size=\"small\" variant=\"outlined\">\n                <Button target=\"_blank\" rel=\"noopener noreferrer\" href={data?.homepage} endIcon={<Language />}>\n                  Website\n                </Button>\n                <Button target=\"_blank\" rel=\"noopener noreferrer\" href={`https://www.imdb.com/title/${data?.imdb_id}`} endIcon={<MovieIcon />}>\n                  IMDB\n                </Button>\n                <Button onClick={() => setOpen(true)} href=\"#\" endIcon={<Theaters />}>\n                  Trailer\n                </Button>\n              </ButtonGroup>\n            </Grid>\n            <Grid item xs={12} sm={6} className={classes.buttonsContainer}>\n              <ButtonGroup size=\"small\" variant=\"outlined\">\n                <Button onClick={addToFavorites} endIcon={isMovieFavorited ? <FavoriteBorderOutlined /> : <Favorite />}>\n                  {isMovieFavorited ? \"Unfavorite\" : \"Favorite\"}\n                </Button>\n                <Button onClick={addToWatchlist} endIcon={isMovieWatchlisted ? <Remove /> : <PlusOne />}>\n                  Watchlist\n                </Button>\n                <Button endIcon={<ArrowBack />} sx={{ borderColor: \"primary.main\" }}>\n                  <Typography style={{ textDecoration: \"none\" }} component={Link} to=\"/\" color=\"inherit\" variant=\"subtitle2\">\n                    Back\n                  </Typography>\n                </Button>\n              </ButtonGroup>\n            </Grid>\n          </div>\n        </Grid>\n      </Grid>\n      <Box marginTop=\"5rem\" width=\"100%\">\n        <Typography variant=\"h4\" gutterBottom align=\"center\">\n          You Might Also Like\n        </Typography>\n        {recommendations ? <MovieList movies={recommendations} numberOfMovies={8} /> : <Box>SORRY, NOTHING WAS FOUND </Box>}\n      </Box>\n      <Modal closeAfterTransition className={classes.modal} open={open} onClose={() => setOpen(false)}>\n        {data?.videos?.results?.length > 0 && <iframe autoPlay className={classes.video} frameBorder=\"0\" title=\"Trailer\" src={`https://www.youtube.com/embed/${data.videos.results[0].key}`} allow=\"autoplay\" />}\n      </Modal>\n    </Grid>\n  );\n};\n\nexport default MovieInformation;\n"]},"metadata":{},"sourceType":"module"}